function O(t,n){if(t.hasOwnProperty("exchange")){const r=localStorage.getItem("LoginStore");if(t.exchange==="cookie"&&n(document.cookie),t.exchange==="isLoggedIn"){if((r==null?void 0:r.includes('"isCookieExpired":false'))||document.cookie.includes("authtoken")){n(!0);return}n(!1)}}}const N="www.apsrtconline.in";function D(){const t=document.getElementById("ForwardAvailableServicesDiv");if(!t)return;new MutationObserver(r=>{r.forEach(i=>{var e,s;((e=i.target.parentElement)==null?void 0:e.id)==="idProofTBForward"&&_(),((s=i.target.parentElement)==null?void 0:s.id)==="PaxTblForward"&&A()})}).observe(t,{childList:!0,subtree:!0})}function A(){chrome.storage.local.get(["pilgrim-details","groupIndex","isEnableUpdateDetails"],t=>{var w,o,u;if(!t.isEnableUpdateDetails)return;const n=t["pilgrim-details"][t.groupIndex].pilgrims,r=t["pilgrim-details"][t.groupIndex].mobile,i=t["pilgrim-details"][t.groupIndex].email,e=n==null?void 0:n.filter(c=>{var f;return((f=c==null?void 0:c.gender)==null?void 0:f.toUpperCase())==="FEMALE"}),s=n==null?void 0:n.filter(c=>{var f;return((f=c==null?void 0:c.gender)==null?void 0:f.toUpperCase())==="MALE"}),m=document.getElementById("PaxTblForward"),d=document.getElementById("mobileNo"),a=document.getElementById("email");d.setAttribute("value",r),a.setAttribute("value",i);const I=m.rows.length-2;let l=0;for(let c=0;c<=I;c++){const f=document.getElementById("passengerNameForward"+c),b=document.getElementById("passengerAgeForward"+c),p=document.getElementById("genderCodeIdForward"+c),x=document.getElementById("concessionIdsForward"+c);(w=x==null?void 0:x.childNodes)==null||w.forEach(g=>{g.textContent==="GENERAL PUBLIC"&&(x.value=g.value)});const E=l?c-l:c;for(let g=0;g<p.childNodes.length;g++)s.length&&s.length>E&&s[E]&&p.childNodes[g].textContent==="MALE"&&(f==null||f.setAttribute("value",s[E].name),b==null||b.setAttribute("value",s[E].age.toString()),p.selectedIndex=g),e.length&&E>=s.length&&e[E-s.length+l]&&p.childNodes.length>1&&p.childNodes[g].textContent==="FEMALE"&&(f==null||f.setAttribute("value",e[E-s.length+l].name),b==null||b.setAttribute("value",e[E-s.length+l].age.toString()),p.selectedIndex=g),e.length&&e[l]&&((o=p==null?void 0:p.childNodes)==null?void 0:o.length)===1&&((u=p==null?void 0:p.childNodes)==null?void 0:u.item(0).textContent)==="FEMALE"&&(f==null||f.setAttribute("value",e[l].name),b==null||b.setAttribute("value",e[l].age.toString()),l++)}})}function _(){const t=document.getElementById("PaxTblForward"),n=document.getElementById("idProofTBForward"),r=n.rows.length-1;chrome.storage.local.get(["pilgrim-details","groupIndex","isEnableUpdateDetails"],i=>{if(!i.isEnableUpdateDetails)return;const e=i["pilgrim-details"][i.groupIndex].pilgrims;for(let s=1;s<=r;s++){const d=t.rows[s].childNodes.item(1).childNodes.item(0),a=n.rows[s],I=a.childNodes.item(0).childNodes.item(0),l=a.childNodes.item(2).childNodes.item(0),w=a.childNodes.item(3).childNodes.item(0);I.setAttribute("value",d.value),e.length&&e.forEach(o=>{var u,c,f,b,p,x;if(((u=o==null?void 0:o.name)==null?void 0:u.toUpperCase())===((c=I==null?void 0:I.value)==null?void 0:c.toUpperCase()))for(let E=0;E<l.length;E++){const g=(f=o==null?void 0:o.id_type)==null?void 0:f.toUpperCase(),v=(x=(p=(b=l==null?void 0:l[E])==null?void 0:b.textContent)==null?void 0:p.trim())==null?void 0:x.toUpperCase(),C=(g==null?void 0:g.includes("AADHAR"))&&(v==null?void 0:v.includes("AADHAR")),L=(g==null?void 0:g.includes("VOTER"))&&(v==null?void 0:v.includes("VOTER")),k=(g==null?void 0:g.includes("PASSPORT"))&&(v==null?void 0:v.includes("PASSPORT"));(C||L||k)&&(l.selectedIndex=E,w.setAttribute("value",o.id_number))}})}})}function U(){const t=window.location.host;window.addEventListener("captcha",n=>{if(console.log(n.detail),t===P){const r=document.getElementById("txtInput");h(r,n.detail)}},!1)}function R(t){const n=window.location.pathname.includes("payment"),r=window.location.pathname.includes("ttd-app"),i=window.location.pathname.includes("ttd-common"),e=window.location.pathname.includes("checkout");if(n||e||r||i)return;new MutationObserver(m=>{m.forEach(d=>{t(d)})}).observe(document.getElementById("__next"),{attributes:!0,childList:!0,subtree:!0})}function M(t){var s,m,d,a,I;const n=window.location.pathname;if(!(n==="/accommodation/pilgrim-details"||n==="/pilgrim-details"||n==="/arjitha-seva/pilgrim-details"||n==="/apd/pilgrim-details"||n==="/pld/pilgrim-details"||n==="/virtual-seva/pilgrim-details"))return;const i=t.addedNodes[0],e=(s=i==null?void 0:i.childNodes)==null?void 0:s[0];if((e==null?void 0:e.nodeName)==="DIV"){const l=e==null?void 0:e.className;((m=l==null?void 0:l.split("_"))==null?void 0:m[0])==="pilgrimDetails"&&y()}((d=i==null?void 0:i.className)==null?void 0:d.length)!==0&&((I=(a=i==null?void 0:i.className)==null?void 0:a.split("_"))==null?void 0:I[1])==="customerDetailsContainer"&&S()}function S(){const t=window.location.pathname,n=document.getElementsByName("fname"),r=document.getElementsByName("age"),i=document.getElementsByName("idProofNumber")||document.getElementsByName("idNumber");chrome.storage.local.get(["pilgrim-details","groupIndex","isEnableUpdateDetails"],e=>{if(!e.isEnableUpdateDetails)return;const s=e["pilgrim-details"][e.groupIndex].pilgrims;(t==="/pld/pilgrim-details"||t==="/apd/pilgrim-details")&&F(s),B(s,"gender","photoIdType"),n.forEach((m,d)=>{var a;m&&((a=s[d])==null?void 0:a.name)&&h(m,s[d].name)}),r.forEach((m,d)=>{var a;m&&((a=s[d])==null?void 0:a.age)!==void 0&&h(m,s[d].age.toString())}),setTimeout(()=>{i.forEach((m,d)=>{var a;m&&((a=s[d])==null?void 0:a.id_number)&&h(m,s[d].id_number)})},300)})}function y(){const t=document.getElementsByName("name"),n=document.getElementsByName("age"),r=document.getElementsByName("idNumber"),i=document.getElementsByName("pilgrimCountry"),e=document.getElementsByName("pilgrimState"),s=document.getElementsByName("pilgrimCity"),m=document.getElementsByName("pilgrimPincode"),d=document.getElementsByName("pilgrimMobileNo"),a=document.getElementsByName("pilgrimEmail"),I=document.getElementsByName("pilgrimGothram");chrome.storage.local.get(["pilgrim-details","groupIndex","isEnableUpdateDetails"],l=>{if(!l.isEnableUpdateDetails)return;const w=l["pilgrim-details"][l.groupIndex].pilgrims;B(w,"gender","idType"),I.forEach(o=>{o&&h(o,"Vishnu")}),d.forEach(o=>{if(o){const u=l["pilgrim-details"][l.groupIndex].mobile;u&&h(o,u)}}),a.forEach(o=>{if(o){const u=l["pilgrim-details"][l.groupIndex].email||l["pilgrim-details"][0].email;u&&h(o,u)}}),i.forEach(o=>{o&&h(o,"India")}),e.forEach(o=>{o&&h(o,"Tamil Nadu")}),s.forEach(o=>{o&&(o.click(),h(o,"Salem"))}),m.forEach(o=>{o&&(o.click(),h(o,"636016"))}),t.forEach((o,u)=>{var c;o&&((c=w[u])==null?void 0:c.name)&&(o.click(),h(o,w[u].name))}),n.forEach((o,u)=>{var c;o&&((c=w[u])==null?void 0:c.age)!==void 0&&(o.click(),h(o,w[u].age.toString()))}),setTimeout(()=>{r.forEach((o,u)=>{var c;o&&((c=w[u])==null?void 0:c.id_number)&&(o.click(),h(o,w[u].id_number))})},300)})}async function B(t,n,r){const i=document.getElementsByName(n),e=document.getElementsByName(r);i.forEach(m=>m.click()),e.forEach(m=>m.click());const s=document.getElementsByTagName("li");for(let[m,d]of t.entries())setTimeout(()=>{for(const a of s){if(a.innerText==="Male"&&d.gender==="male"){a.click();return}if(a.innerText==="Female"&&d.gender==="female"){a.click();return}}},200),setTimeout(()=>{for(const a of s){if((a.innerText==="Aadhaar Card"||a.innerText==="Aadhar Card")&&d.id_type==="aadhar"){a.click();return}if(a.innerText==="Passport"&&d.id_type==="passport"){a.click();return}}},300)}function F(t){const n=document.getElementsByTagName("button");for(let r of n)r.role==="menu"&&r.click();for(let[r,i]of t.entries())setTimeout(()=>{for(let e of n)if(e.id===r.toString()){if(e.innerText==="Female"&&i.gender.toLowerCase()==="female"){e.click();return}if(e.innerText==="Male"&&i.gender.toLowerCase()==="male"){e.click();return}}},100),setTimeout(()=>{for(let e of n)if(e.id===r.toString()){if(e.innerText==="Aadhar Card"&&i.id_type.toLowerCase()==="aadhar"){e.click();return}if(e.innerText==="Passport"&&i.id_type.toLowerCase()==="passport"){e.click();return}}},200)}const j="ttd-ui.vercel.app",H="fastttd.leitogs.site",V="localhost:3330",G="ttdevasthanams.ap.gov.in",P="tirupatibalaji.ap.gov.in",W="srivariseva.tirumala.org",T=window.location.host;T===W&&(localStorage.setItem("countdown","0"),sessionStorage.setItem("countdowntimer","0"),sessionStorage.setItem("timerCOUNT","0"),sessionStorage.setItem("mintimercount","0"),sessionStorage.setItem("timerstatus","N"));T===N&&(window.onload=()=>D());(T===j||T===V||T===H)&&chrome.storage.local.get("extensionId",t=>{localStorage.setItem("extensionId",t.extensionId)});if(T===P){const t=document.createElement("script");t.src=chrome.runtime.getURL("src/inject/index.js"),document.documentElement.appendChild(t),localStorage.setItem("c_timer","0"),U()}T===G&&(localStorage.setItem("user-access",'{"virtual-seva": -1, "spat":-1, "sed": -1, "acc": -1, "arjitha-seva": -1, "apd": -1, "pld": -1, "ssd": -1, "seva-dip": -1, "hundi": -1}'),window.onload=()=>{R(t=>{M(t)})});chrome.runtime.onMessage.addListener((t,n,r)=>{if(O(t,r),t.hasOwnProperty("groupIndex")){const i=window.location.pathname;(i==="/accommodation/pilgrim-details"||i==="/pilgrim-details"||i==="/apd/pilgrim-details"||i==="/pld/pilgrim-details")&&S(),(i==="/arjitha-seva/pilgrim-details"||i==="/virtual-seva/pilgrim-details")&&y(),T===N&&A()}t.hasOwnProperty("clearMobileToken")&&sessionStorage.removeItem("mobile_token"),r("success")});function h(t,n){var e;const r=(e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value"))==null?void 0:e.set;r==null||r.call(t,n);const i=new Event("input",{bubbles:!0});t.dispatchEvent(i)}
